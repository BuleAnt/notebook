官方文档翻译

## 数据库用户角色

每个数据库包括以下客户角色：

- `read`

  提供对所有读取数据的能力*非* -系统集合和下列系统集合：[`system.indexes`](https://docs.mongodb.com/manual/reference/system-collections/#.system.indexes)，[`system.js`](https://docs.mongodb.com/manual/reference/system-collections/#.system.js)，和[`system.namespaces`](https://docs.mongodb.com/manual/reference/system-collections/#.system.namespaces)收藏。该角色通过授予以下[操作来](https://docs.mongodb.com/manual/reference/privilege-actions/#security-user-actions)提供读访问权限：[`collStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#collStats)[`dbHash`](https://docs.mongodb.com/manual/reference/privilege-actions/#dbHash)[`dbStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#dbStats)[`find`](https://docs.mongodb.com/manual/reference/privilege-actions/#find)[`killCursors`](https://docs.mongodb.com/manual/reference/privilege-actions/#killCursors)[`listIndexes`](https://docs.mongodb.com/manual/reference/privilege-actions/#listIndexes)[`listCollections`](https://docs.mongodb.com/manual/reference/privilege-actions/#listCollections)


- `readWrite`

  提供`read`角色的所有权限以及修改所有*非*系统集合和[`system.js`](https://docs.mongodb.com/manual/reference/system-collections/#.system.js)集合上的数据的功能。该角色对这些集合提供以下操作：[`collStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#collStats)[`convertToCapped`](https://docs.mongodb.com/manual/reference/privilege-actions/#convertToCapped)[`createCollection`](https://docs.mongodb.com/manual/reference/privilege-actions/#createCollection)[`dbHash`](https://docs.mongodb.com/manual/reference/privilege-actions/#dbHash)[`dbStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#dbStats)[`dropCollection`](https://docs.mongodb.com/manual/reference/privilege-actions/#dropCollection)[`createIndex`](https://docs.mongodb.com/manual/reference/privilege-actions/#createIndex)[`dropIndex`](https://docs.mongodb.com/manual/reference/privilege-actions/#dropIndex)[`find`](https://docs.mongodb.com/manual/reference/privilege-actions/#find)[`insert`](https://docs.mongodb.com/manual/reference/privilege-actions/#insert)[`killCursors`](https://docs.mongodb.com/manual/reference/privilege-actions/#killCursors)[`listIndexes`](https://docs.mongodb.com/manual/reference/privilege-actions/#listIndexes)[`listCollections`](https://docs.mongodb.com/manual/reference/privilege-actions/#listCollections)[`remove`](https://docs.mongodb.com/manual/reference/privilege-actions/#remove)[`renameCollectionSameDB`](https://docs.mongodb.com/manual/reference/privilege-actions/#renameCollectionSameDB)[`update`](https://docs.mongodb.com/manual/reference/privilege-actions/#update)

  提供`read`角色的所有权限以及修改所有*非*系统集合和[`system.js`](https://docs.mongodb.com/manual/reference/system-collections/#.system.js)集合上的数据的功能。该角色对这些集合提供以下操作：[`collStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#collStats)[`convertToCapped`](https://docs.mongodb.com/manual/reference/privilege-actions/#convertToCapped)[`createCollection`](https://docs.mongodb.com/manual/reference/privilege-actions/#createCollection)[`dbHash`](https://docs.mongodb.com/manual/reference/privilege-actions/#dbHash)[`dbStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#dbStats)[`dropCollection`](https://docs.mongodb.com/manual/reference/privilege-actions/#dropCollection)[`createIndex`](https://docs.mongodb.com/manual/reference/privilege-actions/#createIndex)[`dropIndex`](https://docs.mongodb.com/manual/reference/privilege-actions/#dropIndex)[`find`](https://docs.mongodb.com/manual/reference/privilege-actions/#find)[`insert`](https://docs.mongodb.com/manual/reference/privilege-actions/#insert)[`killCursors`](https://docs.mongodb.com/manual/reference/privilege-actions/#killCursors)[`listIndexes`](https://docs.mongodb.com/manual/reference/privilege-actions/#listIndexes)[`listCollections`](https://docs.mongodb.com/manual/reference/privilege-actions/#listCollections)[`remove`](https://docs.mongodb.com/manual/reference/privilege-actions/#remove)[`renameCollectionSameDB`](https://docs.mongodb.com/manual/reference/privilege-actions/#renameCollectionSameDB)[`update`](https://docs.mongodb.com/manual/reference/privilege-actions/#update)

## 数据库管理角色

每个数据库包括以下数据库管理角色：

- `dbAdmin`

  提供了以下[行动](https://docs.mongodb.com/manual/reference/privilege-actions/#security-user-actions)上的数据库的[`system.indexes`](https://docs.mongodb.com/manual/reference/system-collections/#.system.indexes)， [`system.namespaces`](https://docs.mongodb.com/manual/reference/system-collections/#.system.namespaces)和 [`system.profile`](https://docs.mongodb.com/manual/reference/system-collections/#.system.profile)集合：[`collStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#collStats)[`dbHash`](https://docs.mongodb.com/manual/reference/privilege-actions/#dbHash)[`dbStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#dbStats)[`find`](https://docs.mongodb.com/manual/reference/privilege-actions/#find)[`killCursors`](https://docs.mongodb.com/manual/reference/privilege-actions/#killCursors)[`listIndexes`](https://docs.mongodb.com/manual/reference/privilege-actions/#listIndexes)[`listCollections`](https://docs.mongodb.com/manual/reference/privilege-actions/#listCollections)[`dropCollection`](https://docs.mongodb.com/manual/reference/privilege-actions/#dropCollection)和[`createCollection`](https://docs.mongodb.com/manual/reference/privilege-actions/#createCollection) 上*只*[`system.profile`](https://docs.mongodb.com/manual/reference/system-collections/#.system.profile)**在版本2.6.4中更改：`dbAdmin`添加[`createCollection`](https://docs.mongodb.com/manual/reference/privilege-actions/#createCollection) 了[`system.profile`](https://docs.mongodb.com/manual/reference/system-collections/#.system.profile) 集合。以前的版本只用了 [`dropCollection`](https://docs.mongodb.com/manual/reference/privilege-actions/#dropCollection)上[`system.profile`](https://docs.mongodb.com/manual/reference/system-collections/#.system.profile)集合。对所有*非*系统集合提供以下操作。此角色*不*包括对非系统集合的完全读取访问：[`bypassDocumentValidation`](https://docs.mongodb.com/manual/reference/privilege-actions/#bypassDocumentValidation)[`collMod`](https://docs.mongodb.com/manual/reference/privilege-actions/#collMod)[`collStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#collStats)[`compact`](https://docs.mongodb.com/manual/reference/privilege-actions/#compact)[`convertToCapped`](https://docs.mongodb.com/manual/reference/privilege-actions/#convertToCapped)[`createCollection`](https://docs.mongodb.com/manual/reference/privilege-actions/#createCollection)[`createIndex`](https://docs.mongodb.com/manual/reference/privilege-actions/#createIndex)[`dbStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#dbStats)[`dropCollection`](https://docs.mongodb.com/manual/reference/privilege-actions/#dropCollection)[`dropDatabase`](https://docs.mongodb.com/manual/reference/privilege-actions/#dropDatabase)[`dropIndex`](https://docs.mongodb.com/manual/reference/privilege-actions/#dropIndex)[`enableProfiler`](https://docs.mongodb.com/manual/reference/privilege-actions/#enableProfiler)[`reIndex`](https://docs.mongodb.com/manual/reference/privilege-actions/#reIndex)[`renameCollectionSameDB`](https://docs.mongodb.com/manual/reference/privilege-actions/#renameCollectionSameDB)[`repairDatabase`](https://docs.mongodb.com/manual/reference/privilege-actions/#repairDatabase)[`storageDetails`](https://docs.mongodb.com/manual/reference/privilege-actions/#storageDetails)[`validate`](https://docs.mongodb.com/manual/reference/privilege-actions/#validate)


- `dbOwner`

  数据库所有者可以对数据库执行任何管理操作。这个角色组合由授予的权限`readWrite`， `dbAdmin`和`userAdmin`角色。


- `userAdmin`

  提供创建和修改数据库角色和用户的功能。在数据库上具有此角色的用户可以为该数据库的任何用户（包括其自身）分配任何角色或特权。该`userAdmin`角色明确规定了以下措施：[`changeCustomData`](https://docs.mongodb.com/manual/reference/privilege-actions/#changeCustomData)[`changePassword`](https://docs.mongodb.com/manual/reference/privilege-actions/#changePassword)[`createRole`](https://docs.mongodb.com/manual/reference/privilege-actions/#createRole)[`createUser`](https://docs.mongodb.com/manual/reference/privilege-actions/#createUser)[`dropRole`](https://docs.mongodb.com/manual/reference/privilege-actions/#dropRole)[`dropUser`](https://docs.mongodb.com/manual/reference/privilege-actions/#dropUser)[`grantRole`](https://docs.mongodb.com/manual/reference/privilege-actions/#grantRole)[`revokeRole`](https://docs.mongodb.com/manual/reference/privilege-actions/#revokeRole)[`viewRole`](https://docs.mongodb.com/manual/reference/privilege-actions/#viewRole)[`viewUser`](https://docs.mongodb.com/manual/reference/privilege-actions/#viewUser)警告了解授予`userAdmin`角色的安全性影响很重要 ：具有此角色的用户可以为该数据库分配自己的任何权限。授予 数据库`userAdmin`角色`admin`具有进一步的安全隐患，因为这间接提供了 [超级用户](https://docs.mongodb.com/manual/reference/built-in-roles/#superuser)访问集群的权限。具有`admin` 作用域的用户具有该`userAdmin`角色可以授予集群范围的角色或权限，包括`userAdminAnyDatabase`。

## 群集管理角色

该`admin`数据库包括以下角色，用于管理整个系统，而不仅仅是单个数据库。这些角色包括但不限于[复制集](https://docs.mongodb.com/manual/reference/glossary/#term-replica-set)和分片[集群](https://docs.mongodb.com/manual/reference/glossary/#term-sharded-cluster)管理功能。

- `clusterAdmin`

  提供最大的集群管理访问。这个角色组合由授予的权限`clusterManager`， `clusterMonitor`和`hostManager`角色。此外，角色提供了[`dropDatabase`](https://docs.mongodb.com/manual/reference/privilege-actions/#dropDatabase)动作。


- `clusterManager`

  版本3.4更改。在集群上提供管理和监控动作。具有该角色的用户可以访问`config`和`local`数据库，其在分片和复制所使用的，分别。对集群作为一个整体提供以下操作：[`addShard`](https://docs.mongodb.com/manual/reference/privilege-actions/#addShard)[`appendOplogNote`](https://docs.mongodb.com/manual/reference/privilege-actions/#appendOplogNote)[`applicationMessage`](https://docs.mongodb.com/manual/reference/privilege-actions/#applicationMessage)[`cleanupOrphaned`](https://docs.mongodb.com/manual/reference/privilege-actions/#cleanupOrphaned)[`flushRouterConfig`](https://docs.mongodb.com/manual/reference/privilege-actions/#flushRouterConfig)[`listShards`](https://docs.mongodb.com/manual/reference/privilege-actions/#listShards)[`removeShard`](https://docs.mongodb.com/manual/reference/privilege-actions/#removeShard)[`replSetConfigure`](https://docs.mongodb.com/manual/reference/privilege-actions/#replSetConfigure)[`replSetGetConfig`](https://docs.mongodb.com/manual/reference/privilege-actions/#replSetGetConfig)[`replSetGetStatus`](https://docs.mongodb.com/manual/reference/privilege-actions/#replSetGetStatus)[`replSetStateChange`](https://docs.mongodb.com/manual/reference/privilege-actions/#replSetStateChange)[`resync`](https://docs.mongodb.com/manual/reference/privilege-actions/#resync)对集群中的*所有*数据库执行以下操作：[`enableSharding`](https://docs.mongodb.com/manual/reference/privilege-actions/#enableSharding)[`moveChunk`](https://docs.mongodb.com/manual/reference/privilege-actions/#moveChunk)[`splitChunk`](https://docs.mongodb.com/manual/reference/privilege-actions/#splitChunk)[`splitVector`](https://docs.mongodb.com/manual/reference/privilege-actions/#splitVector)在`config`数据库中，提供以下权限：资源操作`config`数据库中的所有集合[`collStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#collStats)[`dbHash`](https://docs.mongodb.com/manual/reference/privilege-actions/#dbHash)[`dbStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#dbStats)[`enableSharding`](https://docs.mongodb.com/manual/reference/privilege-actions/#enableSharding)[`find`](https://docs.mongodb.com/manual/reference/privilege-actions/#find)[`insert`](https://docs.mongodb.com/manual/reference/privilege-actions/#insert)[`killCursors`](https://docs.mongodb.com/manual/reference/privilege-actions/#killCursors)[`listCollections`](https://docs.mongodb.com/manual/reference/privilege-actions/#listCollections)[`listIndexes`](https://docs.mongodb.com/manual/reference/privilege-actions/#listIndexes)[`moveChunk`](https://docs.mongodb.com/manual/reference/privilege-actions/#moveChunk)[`planCacheRead`](https://docs.mongodb.com/manual/reference/privilege-actions/#planCacheRead)[`remove`](https://docs.mongodb.com/manual/reference/privilege-actions/#remove)[`splitChunk`](https://docs.mongodb.com/manual/reference/privilege-actions/#splitChunk)[`splitVector`](https://docs.mongodb.com/manual/reference/privilege-actions/#splitVector)[`update`](https://docs.mongodb.com/manual/reference/privilege-actions/#update)[`system.indexes`](https://docs.mongodb.com/manual/reference/system-collections/#.system.indexes)，[`system.js`](https://docs.mongodb.com/manual/reference/system-collections/#.system.js)，[`system.namespaces`](https://docs.mongodb.com/manual/reference/system-collections/#.system.namespaces) 集合[`collStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#collStats)[`dbHash`](https://docs.mongodb.com/manual/reference/privilege-actions/#dbHash)[`dbStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#dbStats)[`find`](https://docs.mongodb.com/manual/reference/privilege-actions/#find)[`killCursors`](https://docs.mongodb.com/manual/reference/privilege-actions/#killCursors)[`listCollections`](https://docs.mongodb.com/manual/reference/privilege-actions/#listCollections)[`listIndexes`](https://docs.mongodb.com/manual/reference/privilege-actions/#listIndexes)[`planCacheRead`](https://docs.mongodb.com/manual/reference/privilege-actions/#planCacheRead)在`local`数据库中，提供以下权限：资源操作`local`数据库中的所有集合[`enableSharding`](https://docs.mongodb.com/manual/reference/privilege-actions/#enableSharding)[`insert`](https://docs.mongodb.com/manual/reference/privilege-actions/#insert)[`moveChunk`](https://docs.mongodb.com/manual/reference/privilege-actions/#moveChunk)[`remove`](https://docs.mongodb.com/manual/reference/privilege-actions/#remove)[`splitChunk`](https://docs.mongodb.com/manual/reference/privilege-actions/#splitChunk)[`splitVector`](https://docs.mongodb.com/manual/reference/privilege-actions/#splitVector)[`update`](https://docs.mongodb.com/manual/reference/privilege-actions/#update)[`system.replset`](https://docs.mongodb.com/manual/reference/local-database/#local.system.replset) 采集[`collStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#collStats)[`dbHash`](https://docs.mongodb.com/manual/reference/privilege-actions/#dbHash)[`dbStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#dbStats)[`find`](https://docs.mongodb.com/manual/reference/privilege-actions/#find)[`killCursors`](https://docs.mongodb.com/manual/reference/privilege-actions/#killCursors)[`listCollections`](https://docs.mongodb.com/manual/reference/privilege-actions/#listCollections)[`listIndexes`](https://docs.mongodb.com/manual/reference/privilege-actions/#listIndexes)[`planCacheRead`](https://docs.mongodb.com/manual/reference/privilege-actions/#planCacheRead)


- `clusterMonitor`

  版本3.4更改。提供对监控工具的只读访问权限，例如 [MongoDB Cloud Manager](https://www.mongodb.com/cloud/cloud-manager/?jmp=docs)和[Ops Manager](https://docs.opsmanager.mongodb.com/current/)监控代理。对集群作为一个整体提供以下操作：[`connPoolStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#connPoolStats)[`getCmdLineOpts`](https://docs.mongodb.com/manual/reference/privilege-actions/#getCmdLineOpts)[`getLog`](https://docs.mongodb.com/manual/reference/privilege-actions/#getLog)[`getParameter`](https://docs.mongodb.com/manual/reference/privilege-actions/#getParameter)[`getShardMap`](https://docs.mongodb.com/manual/reference/privilege-actions/#getShardMap)[`hostInfo`](https://docs.mongodb.com/manual/reference/privilege-actions/#hostInfo)[`inprog`](https://docs.mongodb.com/manual/reference/privilege-actions/#inprog)[`listDatabases`](https://docs.mongodb.com/manual/reference/privilege-actions/#listDatabases)[`listShards`](https://docs.mongodb.com/manual/reference/privilege-actions/#listShards)[`netstat`](https://docs.mongodb.com/manual/reference/privilege-actions/#netstat)[`replSetGetConfig`](https://docs.mongodb.com/manual/reference/privilege-actions/#replSetGetConfig)[`replSetGetStatus`](https://docs.mongodb.com/manual/reference/privilege-actions/#replSetGetStatus)[`serverStatus`](https://docs.mongodb.com/manual/reference/privilege-actions/#serverStatus)[`shardingState`](https://docs.mongodb.com/manual/reference/privilege-actions/#shardingState)[`top`](https://docs.mongodb.com/manual/reference/privilege-actions/#top)对集群中的*所有*数据库执行以下操作：[`collStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#collStats)[`dbStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#dbStats)[`getShardVersion`](https://docs.mongodb.com/manual/reference/privilege-actions/#getShardVersion)[`indexStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#indexStats)对集群中的[`find`](https://docs.mongodb.com/manual/reference/privilege-actions/#find)所有[`system.profile`](https://docs.mongodb.com/manual/reference/system-collections/#.system.profile)集合提供操作。在`config`数据库中，提供以下权限：资源操作`config`数据库中的所有集合[`collStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#collStats)[`dbHash`](https://docs.mongodb.com/manual/reference/privilege-actions/#dbHash)[`dbStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#dbStats)[`find`](https://docs.mongodb.com/manual/reference/privilege-actions/#find)[`getShardVersion`](https://docs.mongodb.com/manual/reference/privilege-actions/#getShardVersion)[`indexStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#indexStats)[`killCursors`](https://docs.mongodb.com/manual/reference/privilege-actions/#killCursors)[`listCollections`](https://docs.mongodb.com/manual/reference/privilege-actions/#listCollections)[`listIndexes`](https://docs.mongodb.com/manual/reference/privilege-actions/#listIndexes)[`planCacheRead`](https://docs.mongodb.com/manual/reference/privilege-actions/#planCacheRead)[`system.indexes`](https://docs.mongodb.com/manual/reference/system-collections/#.system.indexes)，[`system.js`](https://docs.mongodb.com/manual/reference/system-collections/#.system.js)，[`system.namespaces`](https://docs.mongodb.com/manual/reference/system-collections/#.system.namespaces) 集合[`collStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#collStats)[`dbHash`](https://docs.mongodb.com/manual/reference/privilege-actions/#dbHash)[`dbStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#dbStats)[`find`](https://docs.mongodb.com/manual/reference/privilege-actions/#find)[`killCursors`](https://docs.mongodb.com/manual/reference/privilege-actions/#killCursors)[`listCollections`](https://docs.mongodb.com/manual/reference/privilege-actions/#listCollections)[`listIndexes`](https://docs.mongodb.com/manual/reference/privilege-actions/#listIndexes)[`planCacheRead`](https://docs.mongodb.com/manual/reference/privilege-actions/#planCacheRead)在`local`数据库中，提供以下权限：资源操作`local`数据库中的所有集合[`collStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#collStats)[`dbHash`](https://docs.mongodb.com/manual/reference/privilege-actions/#dbHash)[`dbStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#dbStats)[`find`](https://docs.mongodb.com/manual/reference/privilege-actions/#find)[`getShardVersion`](https://docs.mongodb.com/manual/reference/privilege-actions/#getShardVersion)[`indexStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#indexStats)[`killCursors`](https://docs.mongodb.com/manual/reference/privilege-actions/#killCursors)[`listCollections`](https://docs.mongodb.com/manual/reference/privilege-actions/#listCollections)[`listIndexes`](https://docs.mongodb.com/manual/reference/privilege-actions/#listIndexes)[`planCacheRead`](https://docs.mongodb.com/manual/reference/privilege-actions/#planCacheRead)[`system.indexes`](https://docs.mongodb.com/manual/reference/system-collections/#.system.indexes)，[`system.js`](https://docs.mongodb.com/manual/reference/system-collections/#.system.js)，[`system.namespaces`](https://docs.mongodb.com/manual/reference/system-collections/#.system.namespaces) 集合[`collStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#collStats)[`dbHash`](https://docs.mongodb.com/manual/reference/privilege-actions/#dbHash)[`dbStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#dbStats)[`find`](https://docs.mongodb.com/manual/reference/privilege-actions/#find)[`killCursors`](https://docs.mongodb.com/manual/reference/privilege-actions/#killCursors)[`listCollections`](https://docs.mongodb.com/manual/reference/privilege-actions/#listCollections)[`listIndexes`](https://docs.mongodb.com/manual/reference/privilege-actions/#listIndexes)[`planCacheRead`](https://docs.mongodb.com/manual/reference/privilege-actions/#planCacheRead)`system.replset`，[`system.profile`](https://docs.mongodb.com/manual/reference/system-collections/#.system.profile)，[`find`](https://docs.mongodb.com/manual/reference/privilege-actions/#find)


- `hostManager`

  提供监控和管理服务器的能力。对集群作为一个整体提供以下操作：[`applicationMessage`](https://docs.mongodb.com/manual/reference/privilege-actions/#applicationMessage)[`closeAllDatabases`](https://docs.mongodb.com/manual/reference/privilege-actions/#closeAllDatabases)[`connPoolSync`](https://docs.mongodb.com/manual/reference/privilege-actions/#connPoolSync)[`cpuProfiler`](https://docs.mongodb.com/manual/reference/privilege-actions/#cpuProfiler)[`diagLogging`](https://docs.mongodb.com/manual/reference/privilege-actions/#diagLogging)[`flushRouterConfig`](https://docs.mongodb.com/manual/reference/privilege-actions/#flushRouterConfig)[`fsync`](https://docs.mongodb.com/manual/reference/privilege-actions/#fsync)[`invalidateUserCache`](https://docs.mongodb.com/manual/reference/privilege-actions/#invalidateUserCache)[`killop`](https://docs.mongodb.com/manual/reference/privilege-actions/#killop)[`logRotate`](https://docs.mongodb.com/manual/reference/privilege-actions/#logRotate)[`resync`](https://docs.mongodb.com/manual/reference/privilege-actions/#resync)[`setParameter`](https://docs.mongodb.com/manual/reference/privilege-actions/#setParameter)[`shutdown`](https://docs.mongodb.com/manual/reference/privilege-actions/#shutdown)[`touch`](https://docs.mongodb.com/manual/reference/privilege-actions/#touch)[`unlock`](https://docs.mongodb.com/manual/reference/privilege-actions/#unlock)对集群中的*所有*数据库执行以下操作：[`killCursors`](https://docs.mongodb.com/manual/reference/privilege-actions/#killCursors)[`repairDatabase`](https://docs.mongodb.com/manual/reference/privilege-actions/#repairDatabase)

## 备份和恢复角色

该`admin`数据库包含一个用于备份和恢复数据以下角色：

- `backup`

  版本3.4更改。提供备份数据所需的最少权限。此角色提供足够的权限来使用[MongoDB Cloud Manager](https://www.mongodb.com/cloud/cloud-manager/?jmp=docs)备份代理，[Ops Manager](https://docs.opsmanager.mongodb.com/current/)备份代理或用于备份 [`mongodump`](https://docs.mongodb.com/manual/reference/program/mongodump/#bin.mongodump)整个[`mongod`](https://docs.mongodb.com/manual/reference/program/mongod/#bin.mongod)实例。提供了[`insert`](https://docs.mongodb.com/manual/reference/privilege-actions/#insert)和[`update`](https://docs.mongodb.com/manual/reference/privilege-actions/#update)上的动作 `mms.backup`在收集`admin`数据库，并在 [`settings`](https://docs.mongodb.com/manual/reference/config-database/#config.settings)在收集`config`数据库。在[anyResource](https://docs.mongodb.com/manual/reference/resource-document/#anyresource)，提供[`listDatabases`](https://docs.mongodb.com/manual/reference/privilege-actions/#listDatabases) 行动[`listCollections`](https://docs.mongodb.com/manual/reference/privilege-actions/#listCollections) 行动[`listIndexes`](https://docs.mongodb.com/manual/reference/privilege-actions/#listIndexes) 行动在[集群上](https://docs.mongodb.com/manual/reference/resource-document/#resource-cluster)作为一个整体，提供[`appendOplogNote`](https://docs.mongodb.com/manual/reference/privilege-actions/#appendOplogNote)[`getParameter`](https://docs.mongodb.com/manual/reference/privilege-actions/#getParameter)[`listDatabases`](https://docs.mongodb.com/manual/reference/privilege-actions/#listDatabases)提供[`find`](https://docs.mongodb.com/manual/reference/privilege-actions/#find)以下操作：集群中的所有*非*系统集合，包括`config`和`local`数据库中的集合集群中的下列系统集合： [`system.indexes`](https://docs.mongodb.com/manual/reference/system-collections/#.system.indexes)， [`system.namespaces`](https://docs.mongodb.com/manual/reference/system-collections/#.system.namespaces)， [`system.js`](https://docs.mongodb.com/manual/reference/system-collections/#.system.js)，和[`system.profile`](https://docs.mongodb.com/manual/reference/system-collections/#.system.profile)在[`admin.system.users`](https://docs.mongodb.com/manual/reference/system-collections/#admin.system.users)与[`admin.system.roles`](https://docs.mongodb.com/manual/reference/system-collections/#admin.system.roles)收藏该[`config.settings`](https://docs.mongodb.com/manual/reference/config-database/#config.settings)集合`system.users`2.6之前的MongoDB版本的旧版集合提供[`insert`](https://docs.mongodb.com/manual/reference/privilege-actions/#insert)和[`update`](https://docs.mongodb.com/manual/reference/privilege-actions/#update)采取行动 [`config.settings`](https://docs.mongodb.com/manual/reference/config-database/#config.settings)。在3.2.1版本中更改：该`backup`角色提供附加权限，以便[`system.profile`](https://docs.mongodb.com/manual/reference/system-collections/#.system.profile) 在使用[数据库分析](https://docs.mongodb.com/manual/administration/analyzing-mongodb-performance/#database-profiling)运行时备份存在的集合。以前，用户需要`read`对此集合进行附加 访问。


- `restore`

  版本3.4更改。提供从不包含[`system.profile`](https://docs.mongodb.com/manual/reference/system-collections/#.system.profile) 收集数据的备份还原数据所需的权限。当[`mongorestore`](https://docs.mongodb.com/manual/reference/program/mongorestore/#bin.mongorestore)没有[`--oplogReplay`](https://docs.mongodb.com/manual/reference/program/mongorestore/#cmdoption-oplogreplay)选项恢复数据时，此角色就足够 了。如果备份数据包括[`system.profile`](https://docs.mongodb.com/manual/reference/system-collections/#.system.profile)收集数据，并且目标数据库不包含[`system.profile`](https://docs.mongodb.com/manual/reference/system-collections/#.system.profile) 集合，则[`mongorestore`](https://docs.mongodb.com/manual/reference/program/mongorestore/#bin.mongorestore)尝试创建集合，即使程序实际上没有还原`system.profile` 文档。因此，用户需要额外的权限来执行 [`createCollection`](https://docs.mongodb.com/manual/reference/privilege-actions/#createCollection)，并[`convertToCapped`](https://docs.mongodb.com/manual/reference/privilege-actions/#convertToCapped) 在行动[`system.profile`](https://docs.mongodb.com/manual/reference/system-collections/#.system.profile) 的数据库集合。内置角色`dbAdmin`并 `dbAdminAnyDatabase`提供额外的权限。如果运行[`mongorestore`](https://docs.mongodb.com/manual/reference/program/mongorestore/#bin.mongorestore)具有[`--oplogReplay`](https://docs.mongodb.com/manual/reference/program/mongorestore/#cmdoption-oplogreplay)的`restore`作用是不够的重播OPLOG。要重播OPLOG，创建[用户定义的角色](https://docs.mongodb.com/manual/tutorial/manage-users-and-roles/#create-user-defined-role)有[`anyAction`](https://docs.mongodb.com/manual/reference/privilege-actions/#anyAction)上 [anyResource](https://docs.mongodb.com/manual/reference/resource-document/#resource-anyresource)，只授予谁必须运行用户[`mongorestore`](https://docs.mongodb.com/manual/reference/program/mongorestore/#bin.mongorestore)用[`--oplogReplay`](https://docs.mongodb.com/manual/reference/program/mongorestore/#cmdoption-oplogreplay)。对集群作为一个整体提供以下操作：[`getParameter`](https://docs.mongodb.com/manual/reference/privilege-actions/#getParameter)对所有*非*系统集合提供以下操作：[`bypassDocumentValidation`](https://docs.mongodb.com/manual/reference/privilege-actions/#bypassDocumentValidation)[`changeCustomData`](https://docs.mongodb.com/manual/reference/privilege-actions/#changeCustomData)[`changePassword`](https://docs.mongodb.com/manual/reference/privilege-actions/#changePassword)[`collMod`](https://docs.mongodb.com/manual/reference/privilege-actions/#collMod)[`createCollection`](https://docs.mongodb.com/manual/reference/privilege-actions/#createCollection)[`createIndex`](https://docs.mongodb.com/manual/reference/privilege-actions/#createIndex)[`createRole`](https://docs.mongodb.com/manual/reference/privilege-actions/#createRole)[`createUser`](https://docs.mongodb.com/manual/reference/privilege-actions/#createUser)[`dropCollection`](https://docs.mongodb.com/manual/reference/privilege-actions/#dropCollection)[`dropRole`](https://docs.mongodb.com/manual/reference/privilege-actions/#dropRole)[`dropUser`](https://docs.mongodb.com/manual/reference/privilege-actions/#dropUser)[`grantRole`](https://docs.mongodb.com/manual/reference/privilege-actions/#grantRole)[`insert`](https://docs.mongodb.com/manual/reference/privilege-actions/#insert)[`revokeRole`](https://docs.mongodb.com/manual/reference/privilege-actions/#revokeRole)[`viewRole`](https://docs.mongodb.com/manual/reference/privilege-actions/#viewRole)[`viewUser`](https://docs.mongodb.com/manual/reference/privilege-actions/#viewUser)对[`system.js`](https://docs.mongodb.com/manual/reference/system-collections/#.system.js)集合提供以下操作：[`bypassDocumentValidation`](https://docs.mongodb.com/manual/reference/privilege-actions/#bypassDocumentValidation)[`collMod`](https://docs.mongodb.com/manual/reference/privilege-actions/#collMod)[`createCollection`](https://docs.mongodb.com/manual/reference/privilege-actions/#createCollection)[`createIndex`](https://docs.mongodb.com/manual/reference/privilege-actions/#createIndex)[`dropCollection`](https://docs.mongodb.com/manual/reference/privilege-actions/#dropCollection)[`insert`](https://docs.mongodb.com/manual/reference/privilege-actions/#insert)对[anyResource](https://docs.mongodb.com/manual/reference/resource-document/#anyresource)提供以下操作：[`listCollections`](https://docs.mongodb.com/manual/reference/privilege-actions/#listCollections)对集群中的[`find`](https://docs.mongodb.com/manual/reference/privilege-actions/#find)所有[`system.namespaces`](https://docs.mongodb.com/manual/reference/system-collections/#.system.namespaces)集合提供操作。`config`对`local`数据库和数据库上的所有非系统集合提供以下操作 ：[`bypassDocumentValidation`](https://docs.mongodb.com/manual/reference/privilege-actions/#bypassDocumentValidation)[`collMod`](https://docs.mongodb.com/manual/reference/privilege-actions/#collMod)[`createCollection`](https://docs.mongodb.com/manual/reference/privilege-actions/#createCollection)[`createIndex`](https://docs.mongodb.com/manual/reference/privilege-actions/#createIndex)[`dropCollection`](https://docs.mongodb.com/manual/reference/privilege-actions/#dropCollection)[`insert`](https://docs.mongodb.com/manual/reference/privilege-actions/#insert)提供以下操作 [`admin.system.version`](https://docs.mongodb.com/manual/reference/system-collections/#admin.system.version)[`bypassDocumentValidation`](https://docs.mongodb.com/manual/reference/privilege-actions/#bypassDocumentValidation)[`collMod`](https://docs.mongodb.com/manual/reference/privilege-actions/#collMod)[`createCollection`](https://docs.mongodb.com/manual/reference/privilege-actions/#createCollection)[`createIndex`](https://docs.mongodb.com/manual/reference/privilege-actions/#createIndex)[`dropCollection`](https://docs.mongodb.com/manual/reference/privilege-actions/#dropCollection)[`find`](https://docs.mongodb.com/manual/reference/privilege-actions/#find)[`insert`](https://docs.mongodb.com/manual/reference/privilege-actions/#insert)提供以下操作 [`admin.system.roles`](https://docs.mongodb.com/manual/reference/system-collections/#admin.system.roles)[`createIndex`](https://docs.mongodb.com/manual/reference/privilege-actions/#createIndex)提供下列行为[`admin.system.users`](https://docs.mongodb.com/manual/reference/system-collections/#admin.system.users) 和传统的`system.users`集合：[`bypassDocumentValidation`](https://docs.mongodb.com/manual/reference/privilege-actions/#bypassDocumentValidation)[`collMod`](https://docs.mongodb.com/manual/reference/privilege-actions/#collMod)[`createCollection`](https://docs.mongodb.com/manual/reference/privilege-actions/#createCollection)[`createIndex`](https://docs.mongodb.com/manual/reference/privilege-actions/#createIndex)[`dropCollection`](https://docs.mongodb.com/manual/reference/privilege-actions/#dropCollection)[`find`](https://docs.mongodb.com/manual/reference/privilege-actions/#find)[`insert`](https://docs.mongodb.com/manual/reference/privilege-actions/#insert)[`remove`](https://docs.mongodb.com/manual/reference/privilege-actions/#remove)[`update`](https://docs.mongodb.com/manual/reference/privilege-actions/#update)虽然`restore`包括[`admin.system.users`](https://docs.mongodb.com/manual/reference/system-collections/#admin.system.users)使用正常修改操作修改集合中的文档的能力，但*只能*使用[用户管理方法](https://docs.mongodb.com/manual/reference/method/#user-management-methods)修改这些数据 。

## 全数据库角色

版本3.4更改。

该`admin`数据库提供了适用于但以下角色`local`和`config`数据库的[`mongod`](https://docs.mongodb.com/manual/reference/program/mongod/#bin.mongod)实例，大致相当于其单数据库等同于：

- `readAnyDatabase`

  提供与只读权限相同的权限`read`，除了它适用于它适用 于集群中除了`local`和`config`数据库之外的所有权限。该角色还为[`listDatabases`](https://docs.mongodb.com/manual/reference/privilege-actions/#listDatabases)整个群集提供了 行动。在3.4版中更改：3.4之前，`readAnyDatabase`包含`local`和 `config`数据库。要为数据库提供`read`权限，请在 `local`数据库中使用`admin`数据库中的 `read`角色创建一个用户`local`。参见`clusterManager`和`clusterMonitor`访问`config`和`local`数据库的角色。


- `readWriteAnyDatabase`

  提供相同的读取和写入权限 `readWrite`，除了它适用于群集中的所有其他数据库`local` 和`config`数据库。该角色还为[`listDatabases`](https://docs.mongodb.com/manual/reference/privilege-actions/#listDatabases)整个群集提供了 行动。在3.4版中更改：3.4之前，`readWriteAnyDatabase`包含`local` 和`config`数据库。要为数据库提供`readWrite`权限，请在`local`数据库中使用`admin`数据库中的`readWrite`角色创建一个用户`local`。参见`clusterManager`和`clusterMonitor` 访问`config`和`local`数据库的角色。


- `userAdminAnyDatabase`

  提供与用户管理操作相同的访问权限 `userAdmin`，除了适用于群集中的所有其他数据库`local` 和`config`数据库。该角色还对集群整体提供以下操作：[`authSchemaUpgrade`](https://docs.mongodb.com/manual/reference/privilege-actions/#authSchemaUpgrade)[`invalidateUserCache`](https://docs.mongodb.com/manual/reference/privilege-actions/#invalidateUserCache)[`listDatabases`](https://docs.mongodb.com/manual/reference/privilege-actions/#listDatabases)该角色还提供了关于下列操作 [`admin.system.users`](https://docs.mongodb.com/manual/reference/system-collections/#admin.system.users)，并[`admin.system.roles`](https://docs.mongodb.com/manual/reference/system-collections/#admin.system.roles)在上收藏`admin`数据库，并在传统的`system.users`从2.6之前的MongoDB的版本集合：[`collStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#collStats)[`dbHash`](https://docs.mongodb.com/manual/reference/privilege-actions/#dbHash)[`dbStats`](https://docs.mongodb.com/manual/reference/privilege-actions/#dbStats)[`find`](https://docs.mongodb.com/manual/reference/privilege-actions/#find)[`killCursors`](https://docs.mongodb.com/manual/reference/privilege-actions/#killCursors)[`planCacheRead`](https://docs.mongodb.com/manual/reference/privilege-actions/#planCacheRead)在2.6.4版本中更改：`userAdminAnyDatabase`添加对下列权限[`admin.system.users`](https://docs.mongodb.com/manual/reference/system-collections/#admin.system.users)和[`admin.system.roles`](https://docs.mongodb.com/manual/reference/system-collections/#admin.system.roles)集合：[`createIndex`](https://docs.mongodb.com/manual/reference/privilege-actions/#createIndex)[`dropIndex`](https://docs.mongodb.com/manual/reference/privilege-actions/#dropIndex)该`userAdminAnyDatabase`角色不限制的权限，用户可以授予。因此，即使角色没有明确授权超出用户管理权限，`userAdminAnyDatabase`用户也可以自己授予超出其当前权限的权限，甚至可以授予自己*所有权限*。这个角色实际上是一个MongoDB系统的[超级用户](https://docs.mongodb.com/manual/reference/built-in-roles/#superuser)。在3.4版中更改：3.4之前，`userAdminAnyDatabase`包含`local` 和`config`数据库。


- `dbAdminAnyDatabase`

  提供与数据库管理操作相同的访问权限 `dbAdmin`，除了适用于群集中的所有其他数据库`local`和`config`数据库。该角色还为[`listDatabases`](https://docs.mongodb.com/manual/reference/privilege-actions/#listDatabases)整个群集提供了 行动。在3.4版中更改：3.4之前，`dbAdminAnyDatabase`包含`local` 和`config`数据库。要为数据库提供`dbAdmin`权限，请在`local`数据库中使用`admin`数据库中的`dbAdmin`角色创建一个用户`local`。参见`clusterManager`和`clusterMonitor`访问`config`和`local`数据库的角色。

## 超级用户角色

多个角色提供间接或直接的全系统超级用户访问。

以下角色提供了向任何用户分配任何数据库权限的功能，这意味着具有这些角色之一的用户可以在任何数据库上分配 *自己的*任何权限：

- `dbOwner`角色，当作用域到`admin`数据库
- `userAdmin`角色，当作用域到`admin`数据库
- `userAdminAnyDatabase` 角色

以下角色为所有资源提供完整权限：

- `root`

  提供了访问和操作的所有资源 `readWriteAnyDatabase`，`dbAdminAnyDatabase`，`userAdminAnyDatabase`，`clusterAdmin`角色 `restore`和`backup`角色*相结合*。改变在3.4版本：该`root`角色包括来自特权 `backup`的角色。改变在3.0.7版本：该`root`有[`validate`](https://docs.mongodb.com/manual/reference/privilege-actions/#validate)行动 `system.`的集合。此前，`root`它 **不**包括对与收藏开始进入任何 `system.`比其他前缀`system.indexes`和 `system.namespaces`。该`root`角色包括来自特权`restore`的角色。

## 内部角色

- `__system`

  MongoDB将此角色分配给表示集群成员的用户对象，例如副本集成员和[`mongos`](https://docs.mongodb.com/manual/reference/program/mongos/#bin.mongos)实例。该角色使其持有人有权对数据库中的任何对象采取任何行动。**不要**将此角色分配给表示应用程序或人员管理员的用户对象，而不在特殊情况下。如果您需要访问所有资源上的所有操作，例如运行[`applyOps`](https://docs.mongodb.com/manual/reference/command/applyOps/#dbcmd.applyOps)命令，请不要分配此角色。取而代之的是，[创建一个用户定义的角色](https://docs.mongodb.com/manual/tutorial/manage-users-and-roles/#create-user-defined-role)，授予[`anyAction`](https://docs.mongodb.com/manual/reference/privilege-actions/#anyAction)在[anyResource](https://docs.mongodb.com/manual/reference/resource-document/#resource-anyresource)并确保只有谁需要访问这些操作的用户拥有此权限。

